
<!DOCTYPE>
<html lang="zh-cn" data-scribe-reduced-action-queue="true">
  <head>
    <meta content='CAKeyframeAnimation 关键帧动画 - Weigel |iOS开发者 | 独立游戏开发者 ' name='title' />
    <meta content='CAKeyframeAnimation 关键帧动画 - Weigel |iOS开发者 | 独立游戏开发者 ' name='og:title' />
    <title>CAKeyframeAnimation 关键帧动画 - Weigel |iOS开发者 | 独立游戏开发者 </title>
    
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <title>CAKeyframeAnimation 关键帧动画 - Weigel |iOS开发者 | 独立游戏开发者 </title>
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="CAKeyframeAnimation 关键帧动画 - Weigel |iOS开发者 | 独立游戏开发者 ">
  <meta name="twitter:keywords"  content="CAKeyframeAnimation 关键帧动画 - Weigel |iOS开发者 | 独立游戏开发者 " property='og:description' />
  <meta property="og:type" content="article">
  <meta property="og:title" content="CAKeyframeAnimation 关键帧动画 - Weigel |iOS开发者 | 独立游戏开发者 ">
  <meta name="og:keywords"  content="CAKeyframeAnimation 关键帧动画 - Weigel |iOS开发者 | 独立游戏开发者 |贝塞尔曲线的基础我们了解了，接下来，我们开始自己做一些动画效果。那么配合贝塞尔曲线的一般使用关键帧动画。为啥呢？因为我喜欢啊,哈哈哈哈！  我们之前使用过CATransition,CATransition直接继承于CAAnimatio..." property='og:description' />
  <meta name="theme-Jekyll by liberxue" content="#eb5055"> 
  <link rel="icon" type="image/png" href="http://localhost:4000/style/favicons/header.ico" />
  <link href="http://localhost:4000/style/favicons/header.ico" rel="shortcut icon" type="image/png">
  <link rel="canonical" href="http://localhost:4000/">
  <link rel="alternate" type="application/rss+xml" title="Liberxue" href="http://localhost:4000/feed.xml">
  <meta charset="UTF-8">  
  <link rel="manifest" href="/manifest.json">
  <link rel="shortcut icon" href="http://localhost:4000/style/favicons/header.ico" type="image/x-icon">
  <meta name="keywords"  content="贝塞尔曲线的基础我们了解了，接下来，我们开始自己做一些动画效果。那么配合贝塞尔曲线的一般使用关键帧动画。为啥呢？因为我喜欢啊,哈哈哈哈！  我们之前使用过CATransition,CATransition直接继承于CAAnimatio..." property='og:description' />
  <meta name="description" content="nothing is more practicla than a good theory" />
  <link href="https://cdn.bootcss.com/highlight.js/9.10.0/styles/xcode.min.css" rel="stylesheet">
  <link href="http://localhost:4000/style/style-liberxue.css" rel="stylesheet">

  <meta content='http://localhost:4000/2017/12/30/Animation-keyFrame.html' property='og:url' />
  <meta content="http://localhost:4000/2017/12/30/Animation-keyFrame.html|贝塞尔曲线的基础我们了解了，接下来，我们开始自己做一些动画效果。那么配合贝塞尔曲线的一般使用关键帧动画。为啥呢？因为我喜欢啊,哈哈哈哈！  我们之前使用过CATransition,CATransition直接继承于CAAnimatio..." property='og:description' />
  <meta content="article" property="og:type" />




  </head>
<body class="" gtools_scp_screen_capture_injected="true">
<header id="header" class="header bg-white">
    <div class="navbar-container">
      <a href="/?liberxue" title="访问 Weigel |iOS开发者 | 独立游戏开发者 " class="navbar-logo"> <img src="http://localhost:4000/style/images/motto.png" alt="Weigel |iOS开发者 | 独立游戏开发者 "> </a>
        <div class="navbar-menu">
                         
            <a href="http://localhost:4000/">首页</a>
                             
            <a href="http://localhost:4000/technology">技术</a>
                             
            <a href="http://localhost:4000/book">书籍</a>
                             
            <a href="http://localhost:4000/archives">归档</a>
                             
            <a href="http://localhost:4000/project">项目</a>
                             
            <a href="http://localhost:4000/tags">标签</a>
                             
            <a href="http://localhost:4000/about">关于</a>
                
          </div>
        <div class="navbar-search" onclick="">
            <span class="icon-search"></span>
            <form id="cb-search-btn" role="search">
         <span class="search-box">
         <input type="text" class="input" id="cb-search-content" required="true" placeholder="标题 标签..." maxlength="30" autocomplete="off">
        </span>
            </form>
        </div>
        <div class="navbar-mobile-menu" onclick="">
            <span class="icon-menu cross"><span class="middle"></span></span>
            <ul>
                          
                <li><a href="http://localhost:4000/">首页</a></li>
                            
                <li><a href="http://localhost:4000/technology">技术</a></li>
                            
                <li><a href="http://localhost:4000/book">书籍</a></li>
                            
                <li><a href="http://localhost:4000/archives">归档</a></li>
                            
                <li><a href="http://localhost:4000/project">项目</a></li>
                            
                <li><a href="http://localhost:4000/tags">标签</a></li>
                            
                <li><a href="http://localhost:4000/about">关于</a></li>
                 
            </ul>
        </div>
    </div>
</header>
<div class="post-header-thumb bg-white}">
	<div class="post-header-thumb-op"></div>
	<div class="post-header-thumb">
		<div class="post-header-thumb-container">
    <h1 class="post-title" itemprop="name headline">
	CAKeyframeAnimation 关键帧动画</h1>
		 <div class="post-data">  
	 <time datetime="2017-12-30 00:00:00" itemprop="datePublished">发布时间：2017-12-30</time>
     <a href="/tags#技术" title="访问 技术" data-hover="博客分类: 技术">博客分类: 技术</a>
    <a href="#read"> 阅读次数: comments</a> 
			</div>
            <div class="post-tags">
                
      
      
       
          <a href="/tags#iOS" title="访问iOS" data-hover="iOS">
          iOS <span>(17)</span>
          
</a>
       
          <a href="/tags#CAKeyframeAnimation" title="访问CAKeyframeAnimation" data-hover="CAKeyframeAnimation">
          CAKeyframeAnimation <span>(1)</span>
          
</a>
       
          <a href="/tags#关键帧动画" title="访问关键帧动画" data-hover="关键帧动画">
          关键帧动画 <span>(1)</span>
          
</a>
       
          <a href="/tags#Animation" title="访问Animation" data-hover="Animation">
          Animation <span>(5)</span>
          
</a>
      
      
      
     
	</div>
</div>
</div></div>
<article class="main-content post-page" itemscope itemtype="http://schema.org/Article">
	<div class="post-header">
		<h1 class="post-title" itemprop="name headline">
			CAKeyframeAnimation 关键帧动画</h1>
		<div class="post-data">
				<time datetime="2017-12-30 00:00:00" itemprop="datePublished">2017-12-30 00:00:00</time>
		</div>
	</div>
	<div id="post-content" class="post-content" itemprop="articleBody">
         <p class="post-tags">
    
      
      
       
          <a href="/tags#iOS" title="访问iOS" data-hover="iOS">
          iOS <span>(17)</span>
          </a>
       
          <a href="/tags#CAKeyframeAnimation" title="访问CAKeyframeAnimation" data-hover="CAKeyframeAnimation">
          CAKeyframeAnimation <span>(1)</span>
          </a>
       
          <a href="/tags#关键帧动画" title="访问关键帧动画" data-hover="关键帧动画">
          关键帧动画 <span>(1)</span>
          </a>
       
          <a href="/tags#Animation" title="访问Animation" data-hover="Animation">
          Animation <span>(5)</span>
          </a>
      
      
      
     
</p>
<p>贝塞尔曲线的基础我们了解了，接下来，我们开始自己做一些动画效果。
那么配合贝塞尔曲线的一般使用关键帧动画。为啥呢？因为我喜欢啊,哈哈哈哈！</p>

<blockquote>
  <p>我们之前使用过CATransition,CATransition直接继承于CAAnimation。</p>
</blockquote>

<p><img src="http://upload-images.jianshu.io/upload_images/1120896-f73c98bd6d124c6b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="动画关系图.png" /></p>

<p>CAAnimation 简单来说是从一个值到另一个值得变化。（例如我们设置某个视图的颜色为红色,然后在动画中设置结果为绿色,那么就会显示这两种值得变化）</p>

<p>而我们今天用的动画CAKeyframeAnimation继承于CAPropertyAnimation，CAPropertyAnimation虽然也继承于CAAnimation,但是CAPropertyAnimation在CAAnimation基础上增加了一种路径属性的设置。我们不再仅限于改变两个值的变化，而是路径中不同坐标点的变化。</p>

<p>接下来我们就可以了解一下: CAKeyframeAnimation
附加官网文档地址:
https://developer.apple.com/documentation/quartzcore/cakeyframeanimation?language=objc</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="k">@property</span><span class="p">(</span><span class="n">nullable</span><span class="p">,</span> <span class="n">copy</span><span class="p">)</span> <span class="n">NSArray</span> <span class="o">*</span><span class="n">values</span><span class="p">;</span>
<span class="err">这个属性我们在之前的心心动画中已经运用到多了。简单来说就是</span><span class="o">:</span>
<span class="p">@[</span><span class="mi">@1</span><span class="p">,</span><span class="mi">@3</span><span class="p">,</span><span class="mi">@4</span><span class="p">,</span><span class="mi">@5</span><span class="p">]</span> <span class="err">我们使用</span><span class="n">CAAnimation</span><span class="err">可以会设置属性值</span><span class="mi">@1</span><span class="err">和</span><span class="mi">@3</span><span class="err">之间的变化，而我们利用</span><span class="n">values</span><span class="err">就可以</span>
<span class="err">逐个的从</span><span class="mi">@1</span><span class="err">依次到</span><span class="mi">@5</span><span class="err">产生变化。</span>

<span class="err">这个属性是只有</span><span class="n">path</span><span class="err">属性为</span><span class="nb">nil</span><span class="err">的时候才有效果</span>
</code></pre>
</div>
<p>我们简单的使用代码实现一下:</p>
<div class="language-swift highlighter-rouge"><pre class="highlight"><code><span class="kt">CAKeyframeAnimation</span> <span class="o">*</span><span class="n">keyAnimation</span> <span class="o">=</span> <span class="p">[</span><span class="kt">CAKeyframeAnimation</span> <span class="nv">animationWithKeyPath</span><span class="p">:</span><span class="s">@"transform.scale"</span><span class="p">];</span>
<span class="n">keyAnimation</span><span class="o">.</span><span class="n">values</span> <span class="o">=</span> <span class="err">@</span><span class="p">[</span><span class="err">@</span><span class="mi">1</span><span class="p">,</span><span class="err">@</span><span class="mi">2</span><span class="p">,</span><span class="err">@</span><span class="mi">3</span><span class="p">,</span><span class="err">@</span><span class="mi">4</span><span class="p">,</span><span class="err">@</span><span class="mi">3</span><span class="p">,</span><span class="err">@</span><span class="mi">2</span><span class="p">,</span><span class="err">@</span><span class="mi">1</span><span class="p">];</span>
<span class="n">keyAnimation</span><span class="o">.</span><span class="n">duration</span> <span class="o">=</span> <span class="mf">3.0</span><span class="n">f</span><span class="p">;</span>
<span class="p">[</span><span class="k">self</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">layer</span> <span class="nv">addAnimation</span><span class="p">:</span><span class="n">keyAnimation</span> <span class="nv">forKey</span><span class="p">:</span><span class="s">@"transform.scale"</span><span class="p">];</span>

</code></pre>
</div>
<p><img src="http://upload-images.jianshu.io/upload_images/1120896-62158727514bbd52.gif?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="values Test.gif" /></p>

<p>可以看到,我们设置了视图的transform.scale 即缩放属性。然后设置它值得变化是@1,@2,@3,@4,@3,@2,@1，也就是从小到大，然后从大到小。</p>

<blockquote>
  <p>@property(nullable) CGPathRef path;
这个属性就是我们设置了path之后，视图会跟着路径去移动。</p>
</blockquote>

<p>我们做个简单的路径动画:
<img src="http://upload-images.jianshu.io/upload_images/1120896-2e0991a0417f3107.gif?imageMogr2/auto-orient/strip%7CimageView2/2/w/240" alt="path.gif" /></p>

<p>先绘制一个Z字型路径:</p>
<div class="highlighter-rouge"><pre class="highlight"><code>_bezier = [UIBezierPath bezierPath];
[_bezier moveToPoint:(CGPoint){0,100}];
[_bezier addLineToPoint:(CGPoint){kSCREENWIDTH,100}];
[_bezier addLineToPoint:(CGPoint){0,200}];
[_bezier addLineToPoint:(CGPoint){kSCREENWIDTH,200}];
[_bezier closePath];
[_bezier setLineWidth:0.2];
</code></pre>
</div>

<p>然后将绘制好的路径设置到动画当中</p>
<div class="highlighter-rouge"><pre class="highlight"><code>//路径动画
CAKeyframeAnimation *keyAnimation = [CAKeyframeAnimation animationWithKeyPath:@"position"];
keyAnimation.duration = 6.0f;
keyAnimation.path = _bezier.CGPath;
[self.label.layer addAnimation:keyAnimation forKey:@"position"];
</code></pre>
</div>

<blockquote>
  <p>@property(nullable, copy) NSArray&lt;NSNumber *&gt; *keyTimes;</p>
</blockquote>

<p>官网中这样写道:
https://developer.apple.com/documentation/quartzcore/cakeyframeanimation/1412522-keytimes?language=objc</p>

<blockquote>
  <p>Each value in the array is a floating point number between 0.0 and 1.0 that defines the time point (specified as a fraction of the animation’s total duration) at which to apply the corresponding keyframe value. 
数组中的每个值都是介于0.0和1.0之间的浮点数，它定义了时间点(指定为动画总长度的一小部分)，用于应用对应的关键帧值。</p>
</blockquote>

<blockquote>
  <p>Each successive value in the array must be greater than, or equal to, the previous value.
数组中的每一个连续值都必须大于或等于前面的值</p>
</blockquote>

<p>该属性是一个数组，每个值分别对应每个子路径(AB,BC,CD,DE)的时间。
如果你没有显式地对keyTimes进行设置，则系统会默认每条子路径的时间为：ti=duration/(帧数)，即每条子路径的duration相等</p>

<p>我们在上述的动画中加入该属性之后，观看一下效果:
<img src="http://upload-images.jianshu.io/upload_images/1120896-7b589157df01194a.gif?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="keyTimes.gif" /></p>

<div class="highlighter-rouge"><pre class="highlight"><code>//路径动画
CAKeyframeAnimation *keyAnimation = [CAKeyframeAnimation animationWithKeyPath:@"position"];
keyAnimation.path = _bezier.CGPath;
keyAnimation.keyTimes = @[@(0.0f),@(0.1f),@(0.2f),@(0.3f),@(0.4f)];
keyAnimation.duration = 6.0f;
[self.label.layer addAnimation:keyAnimation forKey:@"position"];
</code></pre>
</div>
<p>可以看到我们在设置了对应的速度之后,它们的时候速度明显变快了.</p>

<blockquote>
  <p>@property(copy) NSString *calculationMode;
计算模式在关键帧动画中也非常重要,效果比较类似于下面说到的timingFunctions。</p>
</blockquote>

<p>它一般可以配合keyTimes属性进行设置。在官网介绍keyTimes的时候有这样一段话:</p>
<blockquote>
  <p>The appropriate values to include in the array are dependent on the calculationMode property.
在数组中包含的适当值依赖于计算模式属性。</p>
</blockquote>

<blockquote>
  <p>If the calculationMode is set to kCAAnimationLinear or kCAAnimationCubic, 
the first value in the array must be 0.0 and the last value must be 1.0. 
All intermediate values represent time points between the start and end times.
如果将计算模式设置为kCAAnimationLinear或kCAAnimationCubic，那么数组中的第一个值必须是0.0，
最后一个值必须是1.0。所有中间值都表示开始和结束时间之间的时间点。</p>
</blockquote>

<blockquote>
  <p>If the calculationMode is set to kCAAnimationDiscrete, 
the first value in the array must be 0.0 and the last value must be 1.0. 
The array should have one more entry than appears in the values array. For example, 
if there are two values, there should be three key times.
如果将计算模式设置为kCAAnimationDiscrete，那么数组中的第一个值必须是0.0，最后一个值必须是1.0。
该数组应该有一个比在值数组中显示的还要多的条目。例如，如果有两个值，则应该有三个关键时刻。</p>
</blockquote>

<blockquote>
  <p>If the calculationMode is set to kCAAnimationPaced or kCAAnimationCubicPaced, the values in this property are ignored.
如果将计算模式设置为kCAAnimationPaced或kCAAnimationCubicPaced，那么该属性的值就会被忽略。</p>
</blockquote>

<blockquote>
  <p>If the values in this array are invalid or inappropriate for the current calculation mode, they are ignored.
如果该数组中的值无效或不适合当前计算模式，则会忽略它们。</p>
</blockquote>

<p>它的值如下所示:</p>
<div class="highlighter-rouge"><pre class="highlight"><code>默认值,表示当关键帧为坐标点的时候,关键帧之间线性运动; 
CA_EXTERN NSString * const kCAAnimationLinear
    CA_AVAILABLE_STARTING (10.5, 2.0, 9.0, 2.0);

所有关键帧直接逐个运动; 
CA_EXTERN NSString * const kCAAnimationDiscrete
    CA_AVAILABLE_STARTING (10.5, 2.0, 9.0, 2.0);

使得动画均匀进行,而不是按keyTimes设置的或者按关键帧平分时间,此时keyTimes和timingFunctions无效; 
CA_EXTERN NSString * const kCAAnimationPaced
    CA_AVAILABLE_STARTING (10.5, 2.0, 9.0, 2.0);

对关键帧为坐标点的关键帧进行圆滑曲线相连后插值计算,对于曲线的形状还可以通过tensionValues,continuityValues,biasValues来进行调整自定义,
这里的主要目的是使得运行的轨迹变得圆滑; 
CA_EXTERN NSString * const kCAAnimationCubic
    CA_AVAILABLE_STARTING (10.7, 4.0, 9.0, 2.0);

在kCAAnimationCubic的基础上使得动画运行变得均匀,
就是系统时间内运动的距离相同,此时keyTimes以及timingFunctions也是无效的.
CA_EXTERN NSString * const kCAAnimationCubicPaced
    CA_AVAILABLE_STARTING (10.7, 4.0, 9.0, 2.0);
</code></pre>
</div>

<blockquote>
  <p>@property(nullable, copy) NSArray&lt;CAMediaTimingFunction *&gt; *timingFunctions;
设置它可以影响动画的阶段速度。</p>
</blockquote>

<div class="highlighter-rouge"><pre class="highlight"><code>//线性速度,各阶段保持匀速
CA_EXTERN NSString * const kCAMediaTimingFunctionLinear 
    CA_AVAILABLE_STARTING (10.5, 2.0, 9.0, 2.0);

//淡入 也就是开头会慢一点
CA_EXTERN NSString * const kCAMediaTimingFunctionEaseIn
    CA_AVAILABLE_STARTING (10.5, 2.0, 9.0, 2.0);

//淡出 结束的时候会慢
CA_EXTERN NSString * const kCAMediaTimingFunctionEaseOut
    CA_AVAILABLE_STARTING (10.5, 2.0, 9.0, 2.0);

//淡入淡出 开头和结束的时候会慢
CA_EXTERN NSString * const kCAMediaTimingFunctionEaseInEaseOut
    CA_AVAILABLE_STARTING (10.5, 2.0, 9.0, 2.0);

//默认
CA_EXTERN NSString * const kCAMediaTimingFunctionDefault
    CA_AVAILABLE_STARTING (10.6, 3.0, 9.0, 2.0);

</code></pre>
</div>
<p>下面的三个值都是配合 calculationMode 的 kCAAnimationCubic值进行使用的。用来调整自定义的曲线
我们可以通过官网的解释来了解一下，有空的话我也会做一些demo来直观了解一下。</p>
<blockquote>
  <p>@property(nullable, copy) NSArray&lt;NSNumber *&gt; *tensionValues;
一组NSNumber对象定义了曲线的紧密性。</p>
</blockquote>

<blockquote>
  <p>This property is used only for the cubic calculation modes. Positive values indicate a tighter curve while negative values indicate a rounder curve. The first value defines the behavior of the tangent to the first control point, the second value controls the second point’s tangents, and so on. If you do not specify a value for a given control point, the value 0 is used.
该属性仅用于立方计算模式。正值表示一条更紧的曲线，而负值则表示一条圆曲线。第一个值定义了第一个控制点的切线的行为，第二个值控制了第二个点的切线，以此类推。如果不指定给定控制点的值，则使用值0。</p>
</blockquote>

<blockquote>
  <p>@property(nullable, copy) NSArray&lt;NSNumber *&gt; *continuityValues;
一组NSNumber对象，它定义了时间曲线的锐度。</p>
</blockquote>

<blockquote>
  <p>This property is used only for the cubic calculation modes. Positive values result in sharper corners while negative values create inverted corners. The first value defines the behavior of the tangent to the first control point, the second value controls the second point’s tangents, and so on. If you do not specify a value for a given control point, the value 0 is used.
该属性仅用于cubic calculation modes。正值会导致更尖锐的角落，而负值则会产生倒角。第一个值定义了第一个控制点的切线的行为，第二个值控制了第二个点的切线，以此类推。如果不指定给定控制点的值，则使用值0。</p>
</blockquote>

<blockquote>
  <p>@property(nullable, copy) NSArray&lt;NSNumber *&gt; *biasValues;
一组NSNumber对象，它定义了相对于控制点的曲线的位置。</p>
</blockquote>

<blockquote>
  <p>This property is used only for the cubic calculation modes. Positive values move the curve before the control point while negative values move it after the control point. The first value defines the behavior of the tangent to the first control point, the second value controls the second point’s tangents, and so on. If you do not specify a value for a given control point, the value 0 is used.
该属性仅用于cubic calculation modes。正值在控制点前移动曲线，而负值则在控制点之后移动。第一个值定义了第一个控制点的切线的行为，第二个值控制了第二个点的切线，以此类推。如果不指定给定控制点的值，则使用值0。</p>
</blockquote>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="k">@property</span><span class="p">(</span><span class="n">nullable</span><span class="p">,</span> <span class="n">copy</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">rotationMode</span><span class="p">;</span>
<span class="err">旋转样式</span>

<span class="err">根据路径自动旋转</span>
<span class="n">CA_EXTERN</span> <span class="n">NSString</span> <span class="o">*</span> <span class="k">const</span> <span class="n">kCAAnimationRotateAuto</span>
    <span class="n">CA_AVAILABLE_STARTING</span> <span class="p">(</span><span class="mi">10</span><span class="p">.</span><span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span> <span class="mi">9</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">.</span><span class="mi">0</span><span class="p">);</span>

<span class="err">根据路径自动翻转</span>
<span class="n">CA_EXTERN</span> <span class="n">NSString</span> <span class="o">*</span> <span class="k">const</span> <span class="n">kCAAnimationRotateAutoReverse</span>
    <span class="n">CA_AVAILABLE_STARTING</span> <span class="p">(</span><span class="mi">10</span><span class="p">.</span><span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span> <span class="mi">9</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">.</span><span class="mi">0</span><span class="p">);</span>
</code></pre>
</div>
<p>好吧，图片总是上传失败，简单来说就是，图像根据路径移动的时候是会调整自身的方向的，不那么刻板的一直是摆在正中间那样的效果。</p>


		<p class="post-info">
			本文由 <a href="/">杨根威</a> 创作，采用 <a href="https://creativecommons.org/licenses/by/4.0/" target="_blank" rel="external nofollow">知识共享署名4.0</a> 国际许可协议进行许可<br>本站文章除注明转载/出处外，均为本站原创或翻译，转载前请务必署名<br>最后编辑时间为:2017-12-30 00:00:00</p>
	</div>
</article>

<!-- <div class="related-post-lists">
	<div class="post-lists">
		<div class="post-lists-body">
					<div class="post-list-item">
				<div class="post-list-item-container">
					<div class="item-label">
						<div class="item-title"><a href="induction.html">归纳的随想</a></div>
						<div class="item-meta clearfix">
														<div class="item-meta-ico bg-ico-image" style="background: url('../usr/themes/pinghsu/images/bg-ico.png') no-repeat;background-size: 40px auto;"></div>
	                        							<div class="item-meta-cat"><a href="../category/thoughts/index.html">Thoughts</a></div>
						</div>
					</div>
				</div>
			</div>
				</div>
	</div>
</div> -->
<footer class="footer bg-white">
	<div class="footer-social">
		<div class="footer-container clearfix">
			<div class="social-list">
    <a class="social github" target="blank" href="https://github.com/yanggenwei" title="Yanggenwei的Github" data-hover="GitHub">GitHub</a>
	</div>
		</div>
	</div>
	<div class="footer-meta">
        <div class="footer-container">
            <div class="meta-item meta-copyright">
                <div class="meta-copyright-info">
                    <a href="/" class="info-logo">
                         <img src="http://localhost:4000/style/images/motto.png"   title="访问 Yanggenwei_blog" data-hover="Yanggenwei_blog" alt="Yanggenwei_blog" /> </a>
                    <div class="info-text">
                        <p>Theme is <a href="http://www.liberxue.com/2017/08/03/Jekyllthemes.html" title="访问 Jekyll liberxue主题"  data-hover="Jekyll liberxue"target="_blank">Jekyll liberxue</a> by <a href="http://www.liberxue.com/about" target="_blank">liberxue</a></p>
                        <p>Powered by <a href="http://localhost:4000/tags/#Jekyll" title="Jekyll" data-hover="Jekyll" target="_blank" rel="nofollow">Jekyll</a></p>
                        <p>&copy; 2017 <a href="/feed.xml"  title="访问 liberxue blog RSS" data-hover="liberxue blog RSS">Yanggenwei blog RSS</a></p>
                        <p>总计文章：篇</p>
                      <p>本blog已开源点击Fork</p><iframe src="http://ghbtns.com/github-btn.html?user=yanggenwei&repo=yanggenwei.github.io&type=fork&count=true" allowtransparency="true" frameborder="0" scrolling="0" width="95" height="20"></iframe>
                    </div>
                </div>
            </div>
            <div class="meta-item meta-posts">
                <h3 class="meta-title">置顶文章</h3>
     <!--置顶-->
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
        <!--置顶-->
            </div>
            <div class="meta-item meta-comments">
                <h3 class="meta-title">最新文章</h3>
          
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
    
</div>
		</div>
    </div>
</footer>
<script src="//cdn.bootcss.com/jquery/2.2.2/jquery.min.js"></script>
<script src="//cdn.bootcss.com/bootstrap-3-typeahead/4.0.2/bootstrap3-typeahead.js"></script>
<script src="/search/js/cb-search.js"></script>
<script>
$(function () {
    setTimeout(function () {
      $('code').removeClass('hljs');
      $('code').removeClass('language');
    }, 90);
});
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>

<!--liberxueconnnet-menu-->
<div id="directory-content" class="directory-content">
    <div id="directory"></div>
</div>
<!--liberxueconnnet-menu-->
<script>
var postDirectoryBuild = function() {
    var postChildren = function children(childNodes, reg) {
        var result = [],
            isReg = typeof reg === 'object',
            isStr = typeof reg === 'string',
            node, i, len;
        for (i = 0, len = childNodes.length; i < len; i++) {
            node = childNodes[i];
            if ((node.nodeType === 1 || node.nodeType === 9) &&
                (!reg ||
                isReg && reg.test(node.tagName.toLowerCase()) ||
                isStr && node.tagName.toLowerCase() === reg)) {
                result.push(node);
            }
        }
        return result;
    },
    createPostDirectory = function(article, directory, isDirNum) {
        var contentArr = [],
            titleId = [],
            levelArr, root, level,
            currentList, list, li, link, i, len;
        levelArr = (function(article, contentArr, titleId) {
            var titleElem = postChildren(article.childNodes, /^h\d$/),
                levelArr = [],
                lastNum = 1,
                lastRevNum = 1,
                count = 0,
                guid = 1,
                id = 'directory' + (Math.random() + '').replace(/\D/, ''),
                lastRevNum, num, elem;
            while (titleElem.length) {
                elem = titleElem.shift();
                contentArr.push(elem.innerHTML);
                num = +elem.tagName.match(/\d/)[0];
                if (num > lastNum) {
                    levelArr.push(1);
                    lastRevNum += 1;
                } else if (num === lastRevNum ||
                    num > lastRevNum && num <= lastNum) {
                    levelArr.push(0);
                    lastRevNum = lastRevNum;
                } else if (num < lastRevNum) {
                    levelArr.push(num - lastRevNum);
                    lastRevNum = num;
                }
                count += levelArr[levelArr.length - 1];
                lastNum = num;
                elem.id = elem.id || (id + guid++);
                titleId.push(elem.id);
            }
            if (count !== 0 && levelArr[0] === 1) levelArr[0] = 0;

            return levelArr;
        })(article, contentArr, titleId);
        currentList = root = document.createElement('ul');
        dirNum = [0];
        for (i = 0, len = levelArr.length; i < len; i++) {
            level = levelArr[i];
            if (level === 1) {
                list = document.createElement('ul');
                if (!currentList.lastElementChild) {
                    currentList.appendChild(document.createElement('li'));
                }
                currentList.lastElementChild.appendChild(list);
                currentList = list;
                dirNum.push(0);
            } else if (level < 0) {
                level *= 2;
                while (level++) {
                    if (level % 2) dirNum.pop();
                    currentList = currentList.parentNode;
                }
            }
            dirNum[dirNum.length - 1]++;
            li = document.createElement('li');
            link = document.createElement('a');
            link.href = '#' + titleId[i];
            link.title = '访问' + titleId[i];
            link.title = '访问' + titleId[i];
            link.innerHTML = !isDirNum ? contentArr[i] :
                dirNum.join('.') + ' ' + contentArr[i] ;
            li.appendChild(link);
            currentList.appendChild(li);
        }
        directory.appendChild(root);
    };
    createPostDirectory(document.getElementById('post-content'),document.getElementById('directory'), true);
};
postDirectoryBuild();
</script>
  <script src="//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
<script >lang=hljs.initHighlightingOnLoad();</script>   
 </body>
</html>
